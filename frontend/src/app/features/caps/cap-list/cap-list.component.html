<div class="p-6 max-w-6xl mx-auto">
  <h2 class="text-2xl font-bold text-purple-700 mb-4">ğŸ“‹ Historique des dÃ©tections</h2>

  <div *ngIf="loading" class="text-center text-gray-500 mb-4">Chargement...</div>

  <div *ngIf="!loading && caps.length === 0" class="text-center text-gray-400">Aucune dÃ©tection trouvÃ©e.</div>

  <div *ngIf="!loading && caps.length" class="overflow-x-auto">
    <table class="w-full table-auto bg-white dark:bg-gray-900 shadow rounded-md border">
      <thead class="bg-purple-600 text-white">
        <tr>
          <th class="py-2 px-4 text-left">ğŸ†” ID</th>
          <th class="py-2 px-4 text-left">ğŸ” PrÃ©dictions</th>
          <th class="py-2 px-4 text-left">ğŸ—‘ï¸ Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let cap of caps" class="border-b hover:bg-gray-100 dark:hover:bg-gray-800">
          <td class="py-2 px-4 font-medium">{{ cap.id }}</td>
          <td class="py-2 px-4">
            <ul *ngIf="cap.predictions && cap.predictions.length > 0; else noPred" class="text-sm space-y-1">
              <li *ngFor="let pred of cap.predictions">
                <span class="font-semibold">{{ pred.class }}</span> - 
                <span class="text-gray-500 text-xs">Conf: {{ pred.confidence | number:'1.2-2' }}</span>
              </li>
            </ul>
            <ng-template #noPred>
              <span class="text-xs text-gray-400 italic">Aucune prÃ©diction</span>
            </ng-template>
          </td>
          <td class="py-2 px-4">
            <button (click)="deleteCap(cap.id)" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm">
              Supprimer
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
